# AHK4K

> æœ¬æ–‡æ¡£ç”± claude ç”Ÿæˆ

**AHK4K** æ˜¯ä¸€ä¸ªä½¿ç”¨ Kotlin å¼€å‘çš„æ¡Œé¢è‡ªåŠ¨åŒ–å·¥å…·ï¼Œæ—¨åœ¨ç”¨ç°ä»£åŒ–çš„ Kotlin è¯­è¨€å®Œå…¨æ¨¡æ‹Ÿ AutoHotkey (AHK)
çš„æ ¸å¿ƒåŠŸèƒ½ã€‚è¯¥é¡¹ç›®æä¾›äº†çƒ­é”®(Hotkey)å’Œçƒ­å­—ç¬¦ä¸²(HotString)åŠŸèƒ½ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡ç®€æ´çš„ Kotlin DSL è¯­æ³•å®ç°é”®ç›˜è‡ªåŠ¨åŒ–ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ AutoHotkey åŠŸèƒ½æ¨¡æ‹Ÿ

- **çƒ­é”®æ³¨å†Œ** - æ”¯æŒç»„åˆé”®ç›‘å¬å’Œè‡ªå®šä¹‰åŠ¨ä½œæ‰§è¡Œ
- **çƒ­å­—ç¬¦ä¸²** - æ”¯æŒæ–‡æœ¬æ›¿æ¢å’Œè‡ªå®šä¹‰åŠ¨ä½œè§¦å‘
- **é”®ç›˜äº‹ä»¶å‘é€** - æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥å’Œç»„åˆé”®æ“ä½œ
- **åŸç”Ÿ AHK è„šæœ¬è°ƒç”¨** - é€šè¿‡å†…åµŒçš„ AutoHotkey.exe æ‰§è¡ŒåŸç”Ÿè„šæœ¬

### ğŸ› ï¸ ç°ä»£åŒ–æŠ€æœ¯æ ˆ

- **Kotlin Multiplatform** - è·¨å¹³å°æ”¯æŒï¼Œä¸»è¦é’ˆå¯¹ JVM æ¡Œé¢åº”ç”¨ï¼ˆå½“å‰ä»…æ”¯æŒWindowsï¼‰
- **Jetpack Compose Desktop** - ç°ä»£åŒ–çš„å£°æ˜å¼ UI æ¡†æ¶
- **åç¨‹æ”¯æŒ** - å¼‚æ­¥å¤„ç†é”®ç›˜äº‹ä»¶å’Œç”¨æˆ·äº¤äº’
- **MVVM æ¶æ„** - æ¸…æ™°çš„ä»£ç ç»„ç»‡å’ŒçŠ¶æ€ç®¡ç†

### ğŸ’¡ ç”¨æˆ·å‹å¥½ç‰¹æ€§

- **ç³»ç»Ÿæ‰˜ç›˜é›†æˆ** - æœ€å°åŒ–åˆ°ç³»ç»Ÿæ‰˜ç›˜ï¼Œæ”¯æŒå³é”®èœå•æ“ä½œ
- **å¯è§†åŒ–ç•Œé¢** - æä¾›å›¾å½¢ç•Œé¢ç”¨äºç®¡ç†çƒ­å­—ç¬¦ä¸²å’ŒæŸ¥çœ‹æ—¥å¿—
- **æ•°æ®æŒä¹…åŒ–** - åŠ å¯†å­˜å‚¨ç”¨æˆ·é…ç½®çš„çƒ­å­—ç¬¦ä¸²
- **å®æ—¶æ—¥å¿—** - æ˜¾ç¤ºåº”ç”¨è¿è¡ŒçŠ¶æ€å’Œè°ƒè¯•ä¿¡æ¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Java 17+** - é¡¹ç›®ä½¿ç”¨ JVM å·¥å…·é“¾ 17
- **Windows ç³»ç»Ÿ** - ç›®å‰ä¸»è¦æ”¯æŒ Windows å¹³å°
- **Gradle** - ç”¨äºæ„å»ºå’Œä¾èµ–ç®¡ç†

### å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/niki914/ahk4k.git
cd ahk4k
```

### è¿è¡Œåº”ç”¨

```bash
./gradlew run
```

### ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶

```bash
./gradlew packageExe
```

ç¼–è¯‘å®Œæˆçš„ EXE æ–‡ä»¶ä½äºï¼š`/build/compose/binaries/main/exe/`

> **æ³¨æ„**: å¦‚æœé‡åˆ° WiX ä¸‹è½½ç¼“æ…¢çš„é—®é¢˜ï¼Œè¯·å‚è€ƒ [è§£å†³åŠæ³•](https://blog.csdn.net/ai_1018460118/article/details/134274185)

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### DSL è¯­æ³•ç¤ºä¾‹

```kotlin
ahk.load {
    hotkey {
        // æ³¨å†Œ Ctrl+Shift+A çƒ­é”®
        register(Key.Control, Key.Shift, Key.A) {
            println("å¯åŠ¨è®°äº‹æœ¬...")
            ProcessBuilder("notepad.exe").start()
        }
    }

    hotString {
        // æ–‡æœ¬æ›¿æ¢ï¼šè¾“å…¥ "btw" + ç©ºæ ¼ â†’ "by the way"
        register("btw", "by the way")

        // è‡ªå®šä¹‰åŠ¨ä½œï¼šè¾“å…¥ "calc" + ç©ºæ ¼ â†’ å¯åŠ¨è®¡ç®—å™¨
        register("calc") {
            println("å¯åŠ¨è®¡ç®—å™¨...")
            ProcessBuilder("calc.exe").start()
        }
    }
}
```

### åŸºç¡€ API ä½¿ç”¨

```kotlin
// å‘é€ç»„åˆé”®
ahk.sendKeys(Key.Control, Key.C)  // Ctrl+C

// æ³¨å†Œçƒ­é”®
ahk.registerHotkey(Key.F1) {
    println("F1 è¢«æŒ‰ä¸‹")
}

// æ³¨å†Œçƒ­å­—ç¬¦ä¸²
ahk.registerHotString("email", "user@example.com")

// å¯åŠ¨ç›‘å¬
ahk.start()
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ ¸å¿ƒæ¨¡å—

```
src/commonMain/kotlin/com/niki/
â”œâ”€â”€ ahk/                    # AutoHotkey åŠŸèƒ½å®ç°
â”‚   â”œâ”€â”€ framework/          # æ ¸å¿ƒæ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ AHK.kt         # ä¸»è¦æ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ BaseAhk.kt     # åŸºç¡€å®ç°
â”‚   â”‚   â”œâ”€â”€ HotStringAhk.kt # çƒ­å­—ç¬¦ä¸²å®ç°
â”‚   â”‚   â””â”€â”€ DSL.kt         # DSL è¯­æ³•æ”¯æŒ
â”‚   â”œâ”€â”€ Key.kt             # é”®ç›˜æŒ‰é”®å®šä¹‰
â”‚   â””â”€â”€ HotString.kt       # çƒ­å­—ç¬¦ä¸²æ•°æ®ç±»
â”œâ”€â”€ common/                 # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ mvvm/              # MVVM æ¶æ„
â”‚   â”œâ”€â”€ ui/                # UI ç»„ä»¶
â”‚   â””â”€â”€ logging/           # æ—¥å¿—ç³»ç»Ÿ
â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
â”œâ”€â”€ db/                    # æ•°æ®æŒä¹…åŒ–
â””â”€â”€ windows/               # Windows ç³»ç»Ÿç›¸å…³
```

### æŠ€æœ¯ä¾èµ–

- **JNativeHook 2.2.2** - å…¨å±€é”®ç›˜äº‹ä»¶ç›‘å¬
- **Kotlinx Coroutines 1.9.0** - åç¨‹æ”¯æŒ
- **Jetpack Compose Desktop** - UI æ¡†æ¶

## ğŸ® åŠŸèƒ½æ¼”ç¤º

### å†…ç½®ç¤ºä¾‹

åº”ç”¨å¯åŠ¨åä¼šè‡ªåŠ¨é…ç½®ä¸€ä¸ªç¤ºä¾‹çƒ­å­—ç¬¦ä¸²ï¼š

- è¾“å…¥ `btw` + ç©ºæ ¼ â†’ è‡ªåŠ¨æ›¿æ¢ä¸º `by the way`

### ç•Œé¢åŠŸèƒ½

- **æ·»åŠ çƒ­å­—ç¬¦ä¸²** - é€šè¿‡ç•Œé¢æ·»åŠ æ–°çš„æ–‡æœ¬æ›¿æ¢è§„åˆ™
- **çƒ­é”®è®°å½•** - 4ç§’å€’è®¡æ—¶è®°å½•æŒ‰ä¸‹çš„ç»„åˆé”®
- **å®æ—¶æ—¥å¿—** - æŸ¥çœ‹åº”ç”¨è¿è¡ŒçŠ¶æ€å’Œè°ƒè¯•ä¿¡æ¯
- **ç³»ç»Ÿæ‰˜ç›˜** - æœ€å°åŒ–åˆ°æ‰˜ç›˜ï¼Œå³é”®èœå•æ§åˆ¶æ˜¾ç¤º/éšè—

### ç‰¹æ®ŠåŠŸèƒ½

åº”ç”¨åŒ…å«ä¸€ä¸ªè¶£å‘³åŠŸèƒ½ï¼š"è‡ªåŠ¨ä¸‹è½½åŸç¥" ğŸ˜„

## ğŸ”§ é…ç½®è¯´æ˜

### åº”ç”¨é…ç½® (`Config.kt`)

```kotlin
object Config {
    fun getAppName() = "ahk4k"              // åº”ç”¨åç§°
    fun getPassword() = "niki"              // æ•°æ®åº“åŠ å¯†å¯†ç 
    fun getLogSize() = 70                   // æ—¥å¿—æ¡ç›®ä¸Šé™
    fun getInitialVisibility() = true      // åˆå§‹çª—å£å¯è§æ€§
    fun getLogLevel() = LogLevel.VERBOSE    // æ—¥å¿—çº§åˆ«
    fun shouldPrintToConsole() = true       // æ§åˆ¶å°è¾“å‡º
    fun alwaysOnTop() = false              // çª—å£ç½®é¡¶
}
```

### çƒ­å­—ç¬¦ä¸²è§¦å‘å­—ç¬¦

é»˜è®¤é…ç½®ä¸‹ï¼Œçƒ­å­—ç¬¦ä¸²ç”±ä»¥ä¸‹å­—ç¬¦è§¦å‘ï¼š

- åæ–œæ  `\`
- ç©ºæ ¼ ` `
- æ¢è¡Œç¬¦ `\n`

## ğŸ”„ ä¸åŸç”Ÿ AHK çš„é›†æˆ

é¡¹ç›®ä¸ä»…æä¾› Kotlin å®ç°çš„ AutoHotkey åŠŸèƒ½ï¼Œè¿˜ä¿ç•™äº†ä¸åŸç”Ÿ AHK çš„å…¼å®¹æ€§ï¼š

- å†…åµŒ `AutoHotkey.exe` æ‰§è¡Œå™¨
- æ”¯æŒè¿è¡ŒåŸç”Ÿ AHK è„šæœ¬
- æä¾› `AhkScriptRunner` å·¥å…·ç±»
- å‘½åç®¡é“é€šä¿¡æ”¯æŒ

## ğŸ“ é¡¹ç›®æ–‡ä»¶è¯´æ˜

### é‡è¦æ–‡ä»¶

- `/build.gradle.kts` - Gradle æ„å»ºé…ç½®
- `/COMPILE_TO_EXE.md` - ç¼–è¯‘æŒ‡å—
- `src/jvmMain/kotlin/com/niki/Main.kt` - åº”ç”¨å…¥å£ç‚¹

### æ„å»ºäº§ç‰©

- `/build/compose/binaries/main/exe/` - ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ™ è‡´è°¢

- [AutoHotkey](https://www.autohotkey.com/) - çµæ„Ÿæ¥æº
- [JNativeHook](https://github.com/kwhat/jnativehook) - å…¨å±€äº‹ä»¶ç›‘å¬
- [Jetpack Compose](https://developer.android.com/jetpack/compose) - ç°ä»£åŒ– UI æ¡†æ¶

---

**AHK4K** - è®© Kotlin é‡è§è‡ªåŠ¨åŒ–ï¼Œè®©æ¡Œé¢æ“ä½œæ›´é«˜æ•ˆï¼ 